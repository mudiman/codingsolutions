table_names = [
    "activities",
    "activities_audit",
    "attribute",
    "attribute_audit",
    "attribute_value",
    "attribute_value_audit",
    "cohort",
    "cohort_audit",
    "consent",
    "consent_audit",
    "consent_group",
    "consent_group_audit",
    "consent_group_consent",
    "consent_group_consent_audit",
    "consent_group_study_version",
    "consent_group_study_version_audit",
    "consent_version",
    "consent_version_audit",
    "cycle",
    "cycle_audit",
    "device",
    "device_attribute",
    "device_attribute_audit",
    "device_audit",
    "documents",
    "documents_audit",
    "event",
    "event_audit",
    "event_notification",
    "event_notification_audit",
    "event_type",
    "event_type_audit",
    "failed_jobs",
    "failed_jobs_audit",
    "feature_flags",
    "feature_flags_audit",
    "game",
    "game_audit",
    "game_person",
    "game_person_audit",
    "goal",
    "goal_attribute",
    "goal_attribute_audit",
    "goal_audit",
    "goal_category_type",
    "goal_category_type_audit",
    "goal_completion_type",
    "goal_completion_type_audit",
    "goal_reward",
    "goal_reward_audit",
    "goal_task",
    "goal_task_audit",
    "goal_temporal_types",
    "goal_temporal_types_audit",
    "language",
    "language_audit",
    "medications",
    "medications_audit",
    "notification",
    "notification_audit",
    "notification_sequence",
    "notification_sequence_audit",
    "oauth_access_tokens",
    "oauth_access_tokens_audit",
    "oauth_auth_codes",
    "oauth_auth_codes_audit",
    "oauth_clients",
    "oauth_clients_audit",
    "oauth_personal_access_clients",
    "oauth_personal_access_clients_audit",
    "oauth_refresh_tokens",
    "oauth_refresh_tokens_audit",
    "organization",
    "organization_audit",
    "participant_consent_version",
    "participant_consent_version_audit",
    "participant_device",
    "participant_device_audit",
    "participant_goal",
    "participant_goal_audit",
    "participant_goal_participant_task",
    "participant_goal_participant_task_audit",
    "participant_goal_reward",
    "participant_goal_reward_audit",
    "participant_notification",
    "participant_notification_audit",
    "participant_notification_queue",
    "participant_notification_queue_audit",
    "participant_process",
    "participant_process_audit",
    "participant_reward",
    "participant_reward_audit",
    "participant_task",
    "participant_task_annotation",
    "participant_task_annotation_audit",
    "participant_task_annotation_response",
    "participant_task_annotation_response_audit",
    "participant_task_audit",
    "participant_task_consent_version",
    "participant_task_consent_version_audit",
    "participant_task_document",
    "participant_task_document_audit",
    "participant_task_entry",
    "participant_task_entry_audit",
    "participant_task_relationship",
    "participant_task_relationship_audit",
    "participant_task_rule",
    "participant_task_rule_audit",
    "participant_workflow",
    "participant_workflow_audit",
    "password_history",
    "password_history_audit",
    "permission_audit",
    "person",
    "person_attribute",
    "person_attribute_audit",
    "person_audit",
    "person_consent_version",
    "person_consent_version_audit",
    "person_group",
    "person_group_audit",
    "person_group_person",
    "person_group_person_audit",
    "person_group_task",
    "person_group_task_audit",
    "person_process",
    "person_process_audit",
    "person_relationship",
    "person_relationship_audit",
    "person_study_role",
    "person_study_role_audit",
    "person_workflow",
    "person_workflow_audit",
    "process",
    "process_audit",
    "process_event",
    "process_event_audit",
    "process_link",
    "process_link_audit",
    "process_notification",
    "process_notification_audit",
    "process_type",
    "process_type_audit",
    "process_var",
    "process_var_audit",
    "provider",
    "provider_audit",
    "reminders",
    "reminders_audit",
    "reward",
    "reward_audit",
    "reward_badge",
    "reward_badge_audit",
    "reward_device",
    "reward_device_audit",
    "reward_monetary_adjustable",
    "reward_monetary_adjustable_audit",
    "reward_monetary_fixed",
    "reward_monetary_fixed_audit",
    "settings",
    "settings_audit",
    "site",
    "site_audit",
    "site_organization",
    "site_organization_audit",
    "social_accounts",
    "social_accounts_audit",
    "study",
    "study_arm",
    "study_arm_audit",
    "study_arm_game",
    "study_arm_game_audit",
    "study_arm_participant",
    "study_arm_participant_audit",
    "study_arm_participant_property_type_values",
    "study_arm_participant_property_type_values_audit",
    "study_arm_property_types",
    "study_arm_property_types_audit",
    "study_arm_task",
    "study_arm_task_audit",
    "study_attribute",
    "study_attribute_audit",
    "study_audit",
    "study_organization",
    "study_organization_audit",
    "study_role",
    "study_role_audit",
    "study_role_permission",
    "study_role_type",
    "study_role_type_audit",
    "study_site",
    "study_site_audit",
    "study_version",
    "study_version_audit",
    "study_version_consent_group",
    "study_version_consent_group_audit",
    "study_version_study_arm",
    "study_version_study_arm_audit",
    "study_version_workflow",
    "study_version_workflow_audit",
    "system_attribute",
    "system_attribute_audit",
    "task",
    "task_attribute",
    "task_attribute_audit",
    "task_audit",
    "task_category",
    "task_category_audit",
    "task_generation_rule",
    "task_generation_rule_audit",
    "task_language",
    "task_language_audit",
    "task_relationship",
    "task_relationship_audit",
    "task_rule",
    "task_type",
    "task_type_audit",
    "task_version",
    "task_version_audit",
    "timezone",
    "timezone_audit",
    "two_factor_code",
    "two_factor_code_audit",
    "user",
    "user_attribute",
    "user_attribute_audit",
    "user_audit",
    "wallet_transaction",
    "wallet_transaction_audit",
    "workflow",
    "workflow_attribute",
    "workflow_attribute_audit"
]


queries = []
for row in table_names:
    queries.append(
        "update study_model.%s set created_by=0 where created_by is null and EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = '%s' AND column_name = 'created_by');" % (row, row))
    queries.append(
        "update study_model.%s set updated_by=0 where updated_by is null and EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name = '%s' AND column_name = 'created_by');" % (row, row))
    queries.append("""
                   DO $$ 
BEGIN
    IF EXISTS (
        SELECT 1
        FROM information_schema.columns
        WHERE table_name = 'your_table'
        AND column_name = 'updated_by'
    ) THEN
        EXECUTE 'ALTER TABLE your_table ALTER COLUMN updated_by SET DEFAULT your_default_value';
    END IF;
END $$;""" % row)
    queries.append(
        "ALTER TABLE study_model.%s ALTER COLUMN updated_by SET NOT NULL IF EXISTS new_column_name updated_by;" % row)
    queries.append(
        "ALTER TABLE study_model.%s ALTER COLUMN updated_by SET DEFAULT 0 IF EXISTS new_column_name updated_by;" % row)
    queries.append(
        "ALTER TABLE study_model.%s ALTER COLUMN created_by SET NOT NULL IF EXISTS new_column_name created_by;" % row)
    queries.append(
        "ALTER TABLE study_model.%s ALTER COLUMN created_by SET DEFAULT 0 IF EXISTS new_column_name created_by;" % row)
    queries.append("")

print('\n'.join(queries))
